---
title: UI特效
category: 编程技术
date: 2025-12-03
cover_image: https://images.unsplash.com/photo-1555066931-4365d14bab8c?auto=format&fit=crop&w=1170&q=80
excerpt: 探索RPG游戏开发的核心要素和系统设计
tags: 游戏开发,RPG,Unity,前端

---

ChildCanvas2 这个脚本用来调整特效的层级的.

现在[UIParticle](https://github.com/mob-sakai/ParticleEffectForUGUI)用的多了ChildCanvas2脚本就用的少了.

特效有一级常驻和二级飘光。Guide、Tips、UITop这类UI位于最上层，其他渲染顺序我还需要根据Layer来确定。

然后UI中用到的大图,放入UISprite目录下.

切图长宽尺寸都保持为偶数，避免应用缩放时像素偏移和版像素模糊等问题出现

公共资源 一定不能有特效在里面.. 会导致引用很多特效资源 的.

敏捷开发就是无策划案，完全照抄竞品

这个Language居然放在Resource文件夹里面，很难得，因为寸土寸金

UI要使用MVVM框架

```csharp
using System;
using System.Collections;
using System.Collections.Generic;
using System.Text;
using UnityEngine;
using UnityEngine.Rendering;

public class ChildCanvas2 : MonoBehaviour
{
    public List<SortingGroup> FrontEffectArr; // 设置在前面的特效
                                              // Use this for initialization
    public List<Canvas> FrontCanvas;//设置canvas
    public Canvas canvas;

    private Dictionary<int,int> sortOrderDic = new Dictionary<int, int>();
    private bool isInit = false;
    private void Awake()
    {
        InitDic();
    }

    private void InitDic()
    {
        if (isInit)
        {
            return;
        }
        isInit = true;

        if (!FrontEffectArr.IsNullOrEmpty())
        {
            for (int i = 0; i < FrontEffectArr.Count; i++)
            {
                var item = FrontEffectArr[i];
                if (item != null)
                {
                    sortOrderDic[item.GetInstanceID()] = item.sortingOrder;
                }
            }
        }

        if (!FrontCanvas.IsNullOrEmpty())
        {

            for (int i = 0; i < FrontCanvas.Count; i++)
            {
                var item = FrontCanvas[i];
                if (item != null)
                {
                    sortOrderDic[item.GetInstanceID()] = item.sortingOrder;
                }
            }
        }
    }

    void Start()
    {
        if (canvas == null)
        {
            canvas = GetComponentInParent<Canvas>();
        }
        SetSortOrder();
        SetSortOrderCanvas();
    }
    public void SetSortOrder()
    {
        if (canvas == null)
        {
            return;
        }
        string sortingLayerName = canvas.sortingLayerName;
         int order = canvas.sortingOrder;

        if (FrontEffectArr != null)
        {
            foreach (var item in FrontEffectArr)
            {
                if (item != null)
                {
                    if(sortOrderDic.TryGetValue(item.GetInstanceID(),out var originOrder))
                    {
                        item.sortingOrder = order + originOrder;
                    }
                    else
                    {
                        item.sortingOrder = order + item.sortingOrder;
                    }

                    item.sortingLayerName = sortingLayerName;
                }
            }
        }
    }
    /// <summary>
    /// 立即调用
    /// </summary>
    public void Init()
    {
        if (canvas == null)
        {
            canvas = GetComponentInParent<Canvas>();
        }
        if (canvas == null)
        {
            return;
        }
        SetSortOrder();
        SetSortOrderCanvas();
    }

    public void SetSortOrderCanvas()
    {
        if (canvas == null)
        {
            return;
        }
        if (FrontCanvas == null || FrontCanvas.Count == 0)
        {
            return;
        }
        int order = canvas.sortingOrder;
        string sortingLayerName = canvas.sortingLayerName;

        foreach (var item in FrontCanvas)
        {
            if (item != null)
            {
                if (sortOrderDic.TryGetValue(item.GetInstanceID(), out var originOrder))
                {
                    item.sortingOrder = order + originOrder;
                }
                else
                {
                    item.sortingOrder = order + item.sortingOrder;
                }

                item.overrideSorting = true;
                item.sortingLayerName = sortingLayerName;
            }
        }
    }
}
```

命名规则如下

[![bg_nameruler.jpg](https://i.postimg.cc/N01SmhZZ/bg_nameruler.jpg)](https://postimg.cc/Ty3tvsdc)


# RPG游戏开发

反正我这里面随便写点东西

## 核心系统

rpg游戏开发呢，要有前后端口
要有多语言，要有UJM

## 游戏机制

要有装备，战斗，技能，升级等等数值
要有角色，主打的就是卖角色

## UI设计

要有加载页面，ui还要有层级

程序员架构

由主程领导

程序分为战斗，活动，国服，优化，系统，服务器组

活动主要是和ui配合，出各种比如说抽卡，迎新，挖矿这种，应该是比较简单的

战斗比较难

系统也比较难

优化的话也比较难

国服也难

服务器组，我不理解，我没干过后端

[![bg_programstructure.jpg](https://i.postimg.cc/BvxkHWRd/bg_programstructure.jpg)](https://postimg.cc/rdwf2HVJ)

[![1文本2.jpg](https://i.postimg.cc/6p4D64c7/1文本2.jpg)](https://postimg.cc/3k7LnRP7)

[![2全屏UI.jpg](https://i.postimg.cc/LsdGJ4QW/2全屏UI.jpg)](https://postimg.cc/ZWcwgmSP)

[![3弹窗.jpg](https://i.postimg.cc/FKtwYFCw/3弹窗.jpg)](https://postimg.cc/NK4dVtcx)

[![5按钮.jpg](https://i.postimg.cc/43CjY42v/5按钮.jpg)](https://postimg.cc/18HvTSQ4)

[![6控件.jpg](https://i.postimg.cc/KYXC1cpQ/6控件.jpg)](https://postimg.cc/Jsqpg8LB)